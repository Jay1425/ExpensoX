<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Submit an Expense • ExpensoX</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-slate-950 text-slate-100">
    <div class="mx-auto flex max-w-4xl flex-col gap-10 px-6 py-14">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="space-y-3">
                    {% for category, message in messages %}
                        <div class="rounded-lg border border-slate-800 bg-slate-900/60 px-4 py-3 text-sm text-slate-200">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
        <header class="flex flex-col gap-2">
            <a href="{{ url_for('expenses.my_expenses') }}" class="flex items-center gap-2 text-sm font-semibold text-cyan-300 transition hover:text-cyan-200">
                <span aria-hidden="true">←</span> Back to my expenses
            </a>
            <h1 class="text-3xl font-semibold tracking-tight">Submit a new expense</h1>
            <p class="text-sm text-slate-400">Fill in the details below and we’ll notify your approver right away.</p>
        </header>

        <form method="POST" class="flex flex-col gap-8">
            {{ form.hidden_tag() }}

            <section class="grid gap-6 rounded-2xl border border-slate-800 bg-slate-900/50 p-6 shadow-xl shadow-slate-950/40">
                <div class="grid gap-4 md:grid-cols-2">
                    <label class="flex flex-col gap-2 text-sm font-medium text-slate-200">
                        <span>Expense title</span>
                        {{ form.title(class_="rounded-lg border border-slate-800 bg-slate-950 px-3 py-2 text-slate-100 focus:border-cyan-400 focus:outline-none focus:ring-2 focus:ring-cyan-500/40") }}
                        {% for error in form.title.errors %}
                            <span class="text-xs font-medium text-rose-300">{{ error }}</span>
                        {% endfor %}
                    </label>
                    <label class="flex flex-col gap-2 text-sm font-medium text-slate-200">
                        <span>Category</span>
                        {{ form.category(class_="rounded-lg border border-slate-800 bg-slate-950 px-3 py-2 text-slate-100 focus:border-cyan-400 focus:outline-none focus:ring-2 focus:ring-cyan-500/40") }}
                        {% for error in form.category.errors %}
                            <span class="text-xs font-medium text-rose-300">{{ error }}</span>
                        {% endfor %}
                    </label>
                </div>

                <label class="flex flex-col gap-2 text-sm font-medium text-slate-200">
                    <span>Description <span class="font-normal text-slate-500">(optional)</span></span>
                    {{ form.description(class_="min-h-[120px] rounded-lg border border-slate-800 bg-slate-950 px-3 py-2 text-slate-100 focus:border-cyan-400 focus:outline-none focus:ring-2 focus:ring-cyan-500/40") }}
                    {% for error in form.description.errors %}
                        <span class="text-xs font-medium text-rose-300">{{ error }}</span>
                    {% endfor %}
                </label>

                <div class="grid gap-4 md:grid-cols-3">
                    <label class="flex flex-col gap-2 text-sm font-medium text-slate-200">
                        <span>Amount</span>
                        {{ form.amount(class_="rounded-lg border border-slate-800 bg-slate-950 px-3 py-2 text-slate-100 focus:border-cyan-400 focus:outline-none focus:ring-2 focus:ring-cyan-500/40", step="0.01") }}
                        {% for error in form.amount.errors %}
                            <span class="text-xs font-medium text-rose-300">{{ error }}</span>
                        {% endfor %}
                    </label>
                    <label class="flex flex-col gap-2 text-sm font-medium text-slate-200">
                        <span>Currency</span>
                        {{ form.currency(class_="rounded-lg border border-slate-800 bg-slate-950 px-3 py-2 text-slate-100 focus:border-cyan-400 focus:outline-none focus:ring-2 focus:ring-cyan-500/40") }}
                        {% for error in form.currency.errors %}
                            <span class="text-xs font-medium text-rose-300">{{ error }}</span>
                        {% endfor %}
                    </label>
                    <label class="flex flex-col gap-2 text-sm font-medium text-slate-200">
                        <span>Date spent</span>
                        {{ form.spent_at(class_="rounded-lg border border-slate-800 bg-slate-950 px-3 py-2 text-slate-100 focus:border-cyan-400 focus:outline-none focus:ring-2 focus:ring-cyan-500/40") }}
                        {% for error in form.spent_at.errors %}
                            <span class="text-xs font-medium text-rose-300">{{ error }}</span>
                        {% endfor %}
                    </label>
                </div>

                <label class="flex flex-col gap-2 text-sm font-medium text-slate-200">
                    <span>Receipt link <span class="font-normal text-slate-500">(optional)</span></span>
                    {{ form.receipt_url(class_="rounded-lg border border-slate-800 bg-slate-950 px-3 py-2 text-slate-100 placeholder:text-slate-500 focus:border-cyan-400 focus:outline-none focus:ring-2 focus:ring-cyan-500/40", placeholder="https://link.to/your/receipt.pdf") }}
                    {% for error in form.receipt_url.errors %}
                        <span class="text-xs font-medium text-rose-300">{{ error }}</span>
                    {% endfor %}
                </label>
            </section>

            <div class="flex flex-col gap-3 sm:flex-row sm:justify-end">
                <a href="{{ url_for('expenses.my_expenses') }}" class="inline-flex items-center justify-center rounded-lg border border-slate-800 px-4 py-2 text-sm font-semibold text-slate-300 transition hover:border-cyan-400 hover:text-cyan-200">Cancel</a>
                {{ form.submit(class_="inline-flex items-center justify-center rounded-lg bg-cyan-500 px-4 py-2 text-sm font-semibold text-slate-900 transition hover:bg-cyan-400") }}
            </div>
        </form>
    </div>
</body>
</html>