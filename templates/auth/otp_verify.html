<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>{{ heading }}</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
</head>
<body class="bg-slate-950 text-slate-100 min-h-screen">
	<div class="flex min-h-screen items-center justify-center px-6 py-16">
		<div class="w-full max-w-md space-y-8">
			<div class="text-center space-y-2">
				<h1 class="text-3xl font-bold tracking-tight">{{ heading }}</h1>
				<p class="text-sm text-slate-400">{{ description }}</p>
			</div>

			{% with messages = get_flashed_messages(with_categories=True) %}
				{% if messages %}
					<div class="space-y-2">
						{% for category, message in messages %}
							<div class="rounded-lg border border-slate-800 bg-slate-900/80 px-4 py-3 text-sm {{ 'border-cyan-500 text-cyan-200' if category == 'success' else '' }} {{ 'border-amber-500 text-amber-200' if category == 'warning' else '' }} {{ 'border-rose-500 text-rose-200' if category == 'error' else '' }}">
								{{ message }}
							</div>
						{% endfor %}
					</div>
				{% endif %}
			{% endwith %}

			<form method="POST" class="space-y-5 rounded-2xl border border-slate-800 bg-slate-900/60 p-8 shadow-2xl shadow-cyan-500/10">
				{{ form.hidden_tag() }}
				<div>
					<label class="text-sm font-medium text-slate-300">One-time password</label>
					{{ form.otp_code(class_='mt-1 w-full rounded-lg border border-slate-800 bg-slate-950/70 px-4 py-3 text-center text-lg tracking-[0.4em] outline-none transition focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/30', placeholder='000000', maxlength=6) }}
					{% for error in form.otp_code.errors %}
						<p class="mt-1 text-xs text-rose-400">{{ error }}</p>
					{% endfor %}
				</div>
				{% if reset_mode %}
					<div>
						<label class="text-sm font-medium text-slate-300">New password</label>
						{{ form.password(class_='mt-1 w-full rounded-lg border border-slate-800 bg-slate-950/70 px-4 py-3 text-sm outline-none transition focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/30', placeholder='Create a secure password') }}
						{% for error in form.password.errors %}
							<p class="mt-1 text-xs text-rose-400">{{ error }}</p>
						{% endfor %}
					</div>
					<div>
						<label class="text-sm font-medium text-slate-300">Confirm new password</label>
						{{ form.confirm_password(class_='mt-1 w-full rounded-lg border border-slate-800 bg-slate-950/70 px-4 py-3 text-sm outline-none transition focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/30', placeholder='Repeat password') }}
						{% for error in form.confirm_password.errors %}
							<p class="mt-1 text-xs text-rose-400">{{ error }}</p>
						{% endfor %}
					</div>
				{% endif %}
				<button type="submit" class="w-full rounded-lg bg-cyan-500 px-6 py-3 text-sm font-semibold text-slate-900 transition hover:bg-cyan-400">{{ 'Reset password' if reset_mode else 'Verify account' }}</button>
			</form>

			<p class="text-center text-xs text-slate-500">
				Didn't receive a code? Try checking spam or <a class="font-semibold text-cyan-300 hover:text-cyan-200" href="{{ url_for('auth.forgot_password') if reset_mode else url_for('auth.signup') }}">request another</a>.
			</p>
		</div>
	</div>
</body>
</html>